<!--
HW2 - Extra Credit (Currency Converter)
This page converts a user-entered USD amount into several currencies
(Euro, CAD, HKD, JPY, MXN). JavaScript dynamically builds the table
rows from a rates array, and as the user types a USD value, each
"Value" column updates live with the converted result. The table is
styled for readability, with right-aligned numbers and scroll support
on small screens.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="CIS 114 - Homework 2 Extra Credit (Currency Converter)" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HW2 - Extra Credit (Currency Converter)</title>

  <style>
    /* Apply predictable box sizing to all elements */
    *, *::before, *::after { box-sizing: border-box; }

    /* CSS variables for reuse */
    :root { --btn:#4b3f4e; --btnHover:#6a5d6e; --bgSize:640px auto; }

    /* Reset page margins, make it full height */
    html, body { height:100%; margin:0; }

    /* Base body styling */
    body {
      font-family: Arial, sans-serif;
      color: #000;
      background: #fff;
      padding: 24px;
      position: relative;
    }

    /* Background image layer, behind everything */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url("desk-art.png");
      background-repeat: no-repeat;
      background-position: right bottom;
      background-size: var(--bgSize);
      z-index: -2;
      pointer-events: none; /* don’t block clicks */
    }

    /* Semi-transparent overlay above background */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.18);
      z-index: -1;
      pointer-events: none;
    }

    /* Navigation links styled as buttons */
    nav a {
      display: inline-block;
      margin: 6px 8px 16px 0;
      padding: 10px 14px;
      border-radius: 6px;
      background: var(--btn);
      color: #fff;
      text-decoration: none;
      transition: background-color .2s;
    }
    nav a:hover { background: var(--btnHover); }

    /* The main panel around the converter */
    nav.wrap {
      background: rgba(255,255,255,.8);
      padding: 16px;
      border-radius: 10px;
      max-width: 760px;
      width: min(100%, 760px);
      margin: 0; /* left-aligned */
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
    }

    /* Table container allows horizontal scroll on phones */
    .table-wrap {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      max-width: 100%;
    }

    /* Table styling */
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      table-layout: fixed; /* prevents uneven resizing */
    }

    /* Table cell styling */
    th, td {
      padding: 10px 12px;
      border-bottom: 1px solid #eee;
      word-break: break-word;
      min-width: 0;
    }
    thead th { text-align: left; background: #fafafa; }
    td.rate, td.value { text-align: right; }

    /* Column width hints */
    th.value, td.value { width: 40%; }
    th.rate,  td.rate  { width: 25%; }

    /* Output fields inside table */
    input.value {
      width: 100%;
      text-align: right;
      border: none;
      background: transparent;
      font: inherit;
      color: inherit;
      outline: none;
    }
    input.value[readonly] { cursor: not-allowed; }

    /* USD input field */
    #usd {
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 8px 10px;
      text-align: right;
    }
    #usd:focus {
      outline: 2px solid #6aa2ff;
      background: #eef5ff;
      border-color: #6aa2ff;
    }

    /* Small hint text */
    .hint { font-size: .9rem; color: #444; margin-top: 10px; }

    /* Resize background on smaller screens */
    @media (max-width: 1024px) { :root { --bgSize: 500px auto; } }
    @media (max-width: 768px)  { :root { --bgSize: 350px auto; } }

    /* Fix for iOS Safari to prevent clipping */
    @media (max-width: 480px)  {
      :root { --bgSize: 250px auto; }
      body::before { position: absolute; }
    }
  </style>
</head>
<body>
  <h1>Homework 2 – Extra Credit</h1>
  <p>Enter a USD amount. Converted values appear to 2 decimals and align to the right.</p>

  <!-- Navigation back to other parts -->
  <nav aria-label="Part navigation">
    <a href="hw2.html">← HW2 Home</a>
    <a href="hw2-part1.html">Part 1</a>
    <a href="hw2-part2.html">Part 2</a>
    <a href="index.html">Homework 1 (Course Home)</a>
  </nav>

  <!-- Converter panel -->
  <nav class="wrap" aria-label="Currency converter">
    <div class="table-wrap">
      <table aria-label="Currency conversion table">
        <!-- Table header -->
        <thead>
          <tr>
            <th>Currency</th>
            <th class="rate">Rate</th>
            <th class="value">Value</th>
          </tr>
        </thead>

        <!-- Table body will be filled with rows by JavaScript -->
        <tbody id="rows"></tbody>

        <!-- Footer row with USD input -->
        <tfoot>
          <tr>
            <td><strong>Enter Amount of U.S. Dollars</strong></td>
            <td></td>
            <td class="value">
              <input id="usd" type="number" inputmode="decimal" step="0.01" min="0"
                     placeholder="0.00" aria-label="U.S. Dollars" />
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
    <p class="hint">Rates are for 1 USD (June 2024). Values update as you type.</p>
  </nav>

  <script>
    // Currency data: each object has a name and conversion rate
    var rates = [
      { name: 'Euro',            rate: 0.92 },
      { name: 'Canadian Dollar', rate: 1.38 },
      { name: 'Hong Kong Dollar',rate: 7.81 },
      { name: 'Japanese Yen',    rate: 156.73 },
      { name: 'Mexican Peso',    rate: 18.41 }
    ];

    // Grab table body and USD input from the DOM
    var rows = document.getElementById("rows");
    var usd  = document.getElementById("usd");

    // Build one table row for each currency
    for (var i = 0; i < rates.length; i++) {
      var tr = document.createElement("tr");

      // First cell: currency name
      var tdName = document.createElement("td");
      tdName.textContent = rates[i].name;

      // Second cell: conversion rate
      var tdRate = document.createElement("td");
      tdRate.className = "rate";
      tdRate.textContent = rates[i].rate.toFixed(2);

      // Third cell: empty readonly text box for the converted value
      var tdValue = document.createElement("td");
      tdValue.className = "value";
      var out = document.createElement("input");
      out.className = "value";
      out.type = "text";
      out.readOnly = true;
      out.value = ""; // stays blank until user enters USD
      tdValue.appendChild(out);

      // Add all cells into the row, then row into table body
      tr.appendChild(tdName);
      tr.appendChild(tdRate);
      tr.appendChild(tdValue);
      rows.appendChild(tr);
    }

    // Function that updates the "Value" column when USD changes
    function updateValues() {
      var val = usd.value.trim();    // get user input
      var n = Number(val);           // turn it into a number
      var valid = isFinite(n) && n >= 0; // check that it’s valid and not negative

      // Loop over each row in the table
      var trs = rows.getElementsByTagName("tr");
      for (var i = 0; i < trs.length; i++) {
        var rate = rates[i].rate; // get rate for this currency
        var outInput = trs[i].getElementsByTagName("input")[0];

        // If input is invalid, clear the box. Otherwise, calculate conversion.
        if (!valid) {
          outInput.value = "";
        } else {
          outInput.value = (n * rate).toFixed(2);
        }
      }
    }

    // Run updateValues() every time the user types in the USD field
    usd.addEventListener("input", updateValues);
  </script>
</body>
</html>
