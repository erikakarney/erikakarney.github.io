<!--HW5 – Part 1: Survey
1) Validates that ALL groups have a selection/value:
   - Full name (text)
   - Age group (radio)
   - Browsers used (at least one checkbox)
   - Favorite movie type (select)
2) Uses arrays to:
   - Read the checked checkboxes
   - Build a friendly summary string
3) If anything is missing, shows a clear error in the output area.
4) The form can be reused without losing valid inputs.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="CIS 114 - HW5 Part 1 (Survey with arrays)">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HW5 – Part 1 (Survey)</title>

  <style>
    :root { --btn:#4b3f4e; --btnHover:#6a5d6e; --bgSize:640px auto; }
    html, body { height:100%; margin:0; }
    *, *::before, *::after { box-sizing:border-box; }

    body {
      font-family: Arial, sans-serif;
      color:#000; background:#fff;
      padding:24px; position:relative; overflow-x:hidden;
    }
    body::before { content:""; position:fixed; inset:0;
      background:url("desk-art.png") no-repeat right bottom / var(--bgSize);
      z-index:-2; pointer-events:none; }
    body::after  { content:""; position:fixed; inset:0;
      background:rgba(255,255,255,.18); z-index:-1; pointer-events:none; }

    h1 { margin:0 0 12px; }
    nav a { display:inline-block; margin:6px 8px 16px 0; padding:10px 14px;
      background:var(--btn); color:#fff; text-decoration:none; border-radius:6px;
      transition:background-color .2s; }
    nav a:hover { background:var(--btnHover); }

    form { background:rgba(255,255,255,.85); padding:16px; border-radius:10px;
      max-width:700px; box-shadow:0 2px 10px rgba(0,0,0,.06); }
    fieldset { border:1px solid #ddd; border-radius:8px; padding:12px; margin:0 0 12px; }
    legend { font-weight:700; padding:0 6px; }
    .row { display:flex; gap:10px; align-items:center; margin:8px 0; }
    label { font-weight:600; }
    input[type="text"], select {
      padding:8px 10px; border:1px solid #ccc; border-radius:6px; width:100%;
    }
    .buttons { display:flex; gap:10px; margin-top:10px; }
    button { padding:10px 14px; border:none; border-radius:6px; cursor:pointer;
      background:var(--btn); color:#fff; transition:background-color .2s; }
    button:hover { background:var(--btnHover); }

    #out { margin-top:14px; padding:12px; background:#f7f7f7; border-radius:8px; white-space:pre-line; }
    .error { color:#b00020; font-weight:700; }

    @media (max-width:1024px){ :root { --bgSize:500px auto; } }
    @media (max-width:768px) { :root { --bgSize:350px auto; } }
    @media (max-width:480px){ :root { --bgSize:250px auto; } body::before{position:absolute;} }
  </style>
</head>
<body>
  <h1>HW5 – Part 1: Survey</h1>

  <nav aria-label="HW5 navigation">
    <a href="hw5.html">← HW5 Home</a>
    <a href="index.html">Homework 1 (Course Home)</a>
  </nav>

  <!-- The form that collects inputs -->
  <form id="survey" novalidate>
    <!-- Input name -->
    <fieldset>
      <legend>Your Name</legend>
      <div class="row">
        <label for="fullName">Full name</label>
        <input id="fullName" name="fullName" type="text" autocomplete="name" placeholder="Carrie Fisher">
      </div>
    </fieldset>

    <!-- Age group -->
    <fieldset>
      <legend>Age Group</legend>
      <div class="row"><input id="age1" name="age" type="radio" value="Under 21"> <label for="age1">Under 21</label></div>
      <div class="row"><input id="age2" name="age" type="radio" value="21–50">   <label for="age2">21–50</label></div>
      <div class="row"><input id="age3" name="age" type="radio" value="Over 50"> <label for="age3">Over 50</label></div>
    </fieldset>

    <!-- Browsers -->
    <fieldset>
      <legend>Browsers you’ve used</legend>
      <div class="row"><input id="fx"   name="browsers" type="checkbox" value="Firefox"> <label for="fx">Firefox</label></div>
      <div class="row"><input id="edge" name="browsers" type="checkbox" value="Edge">    <label for="edge">Edge</label></div>
      <div class="row"><input id="chr"  name="browsers" type="checkbox" value="Chrome">  <label for="chr">Chrome</label></div>
      <div class="row"><input id="saf"  name="browsers" type="checkbox" value="Safari">  <label for="saf">Safari</label></div>
    </fieldset>

    <!-- Favorite movie type -->
    <fieldset>
      <legend>Favorite Movie Type</legend>
      <div class="row">
        <label for="movie">Choose one</label>
        <select id="movie" name="movie">
          <option value="">-- Select --</option>
          <option>Action</option>
          <option>Comedy</option>
          <option>Drama</option>
          <option>Documentary</option>
          <option>Science Fiction</option>
        </select>
      </div>
    </fieldset>

    <div class="buttons">
      <button type="button" id="submitBtn">Submit</button>
      <button type="reset" id="clearBtn">Clear</button>
    </div>
  </form>

  <!-- Results + error messages -->
  <div id="out" aria-live="polite"></div>

  <script>
    // -------- Helper functions --------

    // Return the value of the checked radio in a group (or "" if none)
    function readCheckedRadio(name) {
      var radios = document.querySelectorAll('input[name="' + name + '"]');
      for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) return radios[i].value;
      }
      return "";
    }

    // Return an array of values from all checked checkboxes in the group
    function readCheckedBoxes(name) {
      var boxes = document.querySelectorAll('input[name="' + name + '"]:checked');
      var values = [];
      boxes.forEach(function (el) { values.push(el.value); });
      return values;
    }

    // Display text in the output area
    function show(text, isError) {
      var out = document.getElementById("out");
      out.innerHTML = isError ? '<p class="error">' + text + '</p>' : text;
    }

    // -------- Submit behavior (no alerts; validate all groups) --------
    document.getElementById("submitBtn").addEventListener("click", function () {
      var name  = document.getElementById("fullName").value.trim();
      var age   = readCheckedRadio("age");
      var used  = readCheckedBoxes("browsers");     // <- array of strings
      var movie = document.getElementById("movie").value;

      // Build a list of missing fields to show a friendly error
      var missing = [];
      if (!name)  missing.push("your full name");
      if (!age)   missing.push("an age group");
      if (used.length === 0) missing.push("at least one browser");
      if (!movie) missing.push("a favorite movie type");

      if (missing.length > 0) {
        show("Please provide " + missing.join(", ") + " before submitting.", true);
        return;
      }

      // Everything is valid: format a friendly summary using the arrays we read
      var msg =
        "Thanks, your data was submitted!\n\n" +
        "Name: " + name + "\n" +
        "Age group: " + age + "\n" +
        "Browsers used: " + used.join(", ") + "\n" +  // array -> string
        "Favorite movie type: " + movie;

      show(msg, false);
    });

    // Clear button: just wipe the message area
    document.getElementById("clearBtn").addEventListener("click", function () {
      show("");
      document.getElementById("fullName").focus();
    });
  </script>
</body>
</html>
